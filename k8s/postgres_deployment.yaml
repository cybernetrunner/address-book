---
kind: Deployment
apiVersion: apps/v1

metadata:
  name: postgres-db

spec:
  replicas: 1

  selector:
    matchLabels:
      name: postgres-db

  template:
    metadata:
      labels:
        name: postgres-db
    spec:
      containers:
      - name: database
        image: postgres:10.1
        imagePullPolicy: IfNotPresent
        ports:
        - containerPort: 5432
          env:
          - name: POSTGRES_DB
            value: "gorm"
          - name: POSTGRES_USER
            value: "gorm"
          - name: POSTGRES_PASSWORD
            value: "gorm12345"
          volumeMounts:
          - mountPath: "/var/lib/postgresql/data"
            name: "mendix-pgdata"
      volumes:
      - hostPath:
        path: "/home/docker/pgdata"
        name: mendix-pgdata
